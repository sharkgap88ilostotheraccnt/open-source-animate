<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Open Illustrator v1.4</title>
<style>
    body {
        margin: 0;
        background: #2e2e2e;
        color: white;
        font-family: Arial, sans-serif;
        display: flex;
        height: 100vh;
        overflow: hidden;
    }

    /* Left toolbar */
    #toolbar {
        width: 60px;
        background: #1e1e1e;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 10px;
        border-right: 1px solid #444;
    }
    #toolbar button {
        background: none;
        border: none;
        color: white;
        margin: 5px 0;
        padding: 5px;
        cursor: pointer;
        width: 40px;
        height: 40px;
    }
    #toolbar button:hover {
        background: #444;
    }

    /* Top bar */
    #topbar {
        position: fixed;
        left: 60px;
        right: 0;
        top: 0;
        height: 50px;
        background: #252525;
        display: flex;
        align-items: center;
        padding: 0 10px;
        border-bottom: 1px solid #444;
        gap: 10px;
    }
    #topbar input, #topbar select {
        background: #3a3a3a;
        border: none;
        color: white;
        padding: 5px;
    }

    /* Right panel (Layers, colors) */
    #rightpanel {
        width: 200px;
        background: #1e1e1e;
        display: flex;
        flex-direction: column;
        padding: 10px;
        border-left: 1px solid #444;
    }

    /* Canvas area */
    #canvas-container {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        padding-top: 50px;
        padding-bottom: 0;
    }
    canvas {
        background: white;
        border: 1px solid #555;
    }
</style>
</head>
<body>

<div id="toolbar">
    <button id="selectTool" title="Select">🖱️</button>
    <button id="brushTool" title="Brush">🖌️</button>
    <button id="lineTool" title="Line">📏</button>
    <button id="rectTool" title="Rectangle">▭</button>
    <button id="circleTool" title="Circle">⚪</button>
    <button id="textTool" title="Text">T</button>
    <button id="starTool" title="Star">⭐</button>
    <button id="triangleTool" title="Triangle">▲</button>
    <button id="fillTool" title="Fill">🪣</button>
    <button id="zoomTool" title="Zoom">🔍</button>
    <hr style="width: 80%; border-color: #444;">
    <button id="exportBtn" title="Export">💾</button>
    <button id="importBtn" title="Import">📂</button>
</div>

<div id="topbar">
    <label>Color: <input type="color" id="colorPicker"></label>
    <label>Size: <input type="number" id="sizePicker" value="5" min="1" max="100"></label>
    <select id="toolOptions">
        <option value="normal">Normal</option>
        <option value="dotted">Dotted</option>
    </select>
</div>

<div id="canvas-container">
    <canvas id="drawingCanvas" width="1000" height="600"></canvas>
</div>

<div id="rightpanel">
    <h3>Layers</h3>
    <ul id="layersList"></ul>
    <h3>Colors</h3>
    <input type="color" id="colorPanelPicker">
</div>

<script>
// ===== VARIABLES =====
let canvas = document.getElementById('drawingCanvas');
let ctx = canvas.getContext('2d');
let isDrawing = false;
let currentTool = 'brush';
let startX, startY;
let color = document.getElementById('colorPicker').value;
let size = parseInt(document.getElementById('sizePicker').value);

// ===== TOOL BUTTONS =====
document.getElementById('brushTool').onclick = () => currentTool = 'brush';
document.getElementById('lineTool').onclick = () => currentTool = 'line';
document.getElementById('rectTool').onclick = () => currentTool = 'rect';
document.getElementById('circleTool').onclick = () => currentTool = 'circle';
document.getElementById('textTool').onclick = () => currentTool = 'text';
document.getElementById('starTool').onclick = () => currentTool = 'star';
document.getElementById('triangleTool').onclick = () => currentTool = 'triangle';
document.getElementById('fillTool').onclick = () => currentTool = 'fill';
document.getElementById('zoomTool').onclick = () => currentTool = 'zoom';
document.getElementById('selectTool').onclick = () => currentTool = 'select';

// ===== DRAWING LOGIC =====
canvas.addEventListener('mousedown', e => {
    isDrawing = true;
    startX = e.offsetX;
    startY = e.offsetY;
    if (currentTool === 'fill') {
        ctx.fillStyle = color;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    }
});
canvas.addEventListener('mouseup', e => {
    isDrawing = false;
    ctx.beginPath();
});
canvas.addEventListener('mousemove', e => {
    if (!isDrawing) return;
    ctx.strokeStyle = color;
    ctx.lineWidth = size;
    if (currentTool === 'brush') {
        ctx.lineTo(e.offsetX, e.offsetY);
        ctx.stroke();
    }
});

// ===== COLOR & SIZE =====
document.getElementById('colorPicker').oninput = e => color = e.target.value;
document.getElementById('sizePicker').oninput = e => size = parseInt(e.target.value);

// ===== EXPORT =====
document.getElementById('exportBtn').onclick = () => {
    let link = document.createElement('a');
    link.download = 'drawing.png';
    link.href = canvas.toDataURL();
    link.click();
};

// ===== IMPORT =====
document.getElementById('importBtn').onclick = () => {
    let input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    input.onchange = e => {
        let file = e.target.files[0];
        let reader = new FileReader();
        reader.onload = evt => {
            let img = new Image();
            img.onload = () => ctx.drawImage(img, 0, 0);
            img.src = evt.target.result;
        };
        reader.readAsDataURL(file);
    };
    input.click();
};
</script>
</body>
</html>
