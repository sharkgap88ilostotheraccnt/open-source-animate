<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Mini Animate Clone</title>
<style>
  body { background: #222; color: #fff; font-family: sans-serif; text-align: center; }
  canvas { background: #333; margin-top: 10px; cursor: move; }
  button { margin: 5px; padding: 5px 10px; }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>
<body>
<h2>Mini Animate (Prototype)</h2>
<button id="addObj">‚ûï Add Object</button>
<button id="setStart">üé¨ Set Start</button>
<button id="setEnd">üèÅ Set End</button>
<button id="tween">‚ñ∂Ô∏è Tween</button>
<canvas id="canvas" width="600" height="400"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
let objects = [];
let selected = null;
let dragging = false;
let offsetX, offsetY;
let startState = null;
let endState = null;

// Add new object
document.getElementById("addObj").onclick = () => {
  const obj = { x: 100, y: 100, w: 80, h: 80, color: `hsl(${Math.random()*360},70%,50%)` };
  objects.push(obj);
  selected = obj;
  draw();
};

// Dragging logic
canvas.onmousedown = e => {
  const mx = e.offsetX, my = e.offsetY;
  selected = objects.find(o => mx > o.x && mx < o.x+o.w && my > o.y && my < o.y+o.h);
  if (selected) {
    dragging = true;
    offsetX = mx - selected.x;
    offsetY = my - selected.y;
  }
};

canvas.onmousemove = e => {
  if (dragging && selected) {
    selected.x = e.offsetX - offsetX;
    selected.y = e.offsetY - offsetY;
    draw();
  }
};

canvas.onmouseup = () => dragging = false;

// Tween buttons
document.getElementById("setStart").onclick = () => {
  if (selected) startState = { x: selected.x, y: selected.y };
};

document.getElementById("setEnd").onclick = () => {
  if (selected) endState = { x: selected.x, y: selected.y };
};

document.getElementById("tween").onclick = () => {
  if (selected && startState && endState) {
    selected.x = startState.x;
    selected.y = startState.y;
    gsap.to(selected, { duration: 1.5, x: endState.x, y: endState.y, onUpdate: draw });
  }
};

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  objects.forEach(o => {
    ctx.fillStyle = o.color;
    ctx.fillRect(o.x, o.y, o.w, o.h);
    if (o === selected) {
      ctx.strokeStyle = "#fff";
      ctx.strokeRect(o.x-2, o.y-2, o.w+4, o.h+4);
    }
  });
}
</script>
</body>
</html>
