<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Draw Symbol</title>
<style>
  body { background: #222; color: white; text-align: center; }
  canvas { background: white; border:1px solid black; display:block; margin:auto; cursor:crosshair; }
  button { margin-top: 10px; }
</style>
</head>
<body>
  <h3>Draw Symbol</h3>
  <canvas id="symbolCanvas" width="400" height="400"></canvas><br>
  <button id="save">Save Symbol</button>
  <input type="color" id="symbolColor">


  <script>
    const c = document.getElementById("symbolCanvas");
    const cx = c.getContext("2d");
    cx.lineWidth = 2;
    cx.lineCap = "round";
    let drawing = false;

    const colorInput = document.getElementById("symbolColor");
let currentColor = "#ff0000";

colorInput.addEventListener("input", (e) => {
  currentColor = e.target.value;
  drawSymbol(); // refresh the symbol preview
});

// Example symbol drawing function
function drawSymbol() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = currentColor;
  ctx.fillRect(50, 50, 100, 100); // placeholder shape
}

// When saving
function saveSymbol() {
  const dataURL = canvas.toDataURL();
  window.opener.receiveSymbol(dataURL);
  window.close();
}


    c.addEventListener("mousedown", e => { drawing = true; cx.beginPath(); cx.moveTo(e.offsetX, e.offsetY); });
    c.addEventListener("mousemove", e => { if (drawing) { cx.lineTo(e.offsetX, e.offsetY); cx.stroke(); } });
    c.addEventListener("mouseup", () => drawing = false);

    document.getElementById("save").onclick = () => {
      const data = c.toDataURL();
      window.opener.receiveSymbol(data);
      window.close();
    };
  </script>
</body>
</html>
